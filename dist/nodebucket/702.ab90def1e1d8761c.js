"use strict";(self.webpackChunknodebucket=self.webpackChunknodebucket||[]).push([[702],{4702:(x,c,s)=>{s.r(c),s.d(c,{SecurityModule:()=>S});var u=s(6814),o=s(95),a=s(2129),d=s(9862),t=s(4769);let m=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-security"]],decls:1,vars:0,template:function(n,r){1&n&&t._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2})}return e})();var g=s(459);let h=(()=>{class e{constructor(i){this.http=i}findEmployeeById(i){return this.http.get("/api/employees/"+i)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(d.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function f(e,p){if(1&e&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.hij(" ",i.errorMessage," ")}}function v(e,p){1&e&&(t.TgZ(0,"span"),t._uU(1,"Sign In"),t.qZA())}function y(e,p){1&e&&(t.TgZ(0,"div"),t._UZ(1,"span",17),t._uU(2," Loading... "),t.qZA())}const b=[{path:"",component:m,children:[{path:"signin",component:(()=>{class e{constructor(i,n,r,l,I){this.route=i,this.router=n,this.cookieService=r,this.securityService=l,this.fb=I,this.isLoading=!1,this.signinForm=this.fb.group({empId:[null,o.kI.compose([o.kI.required,o.kI.pattern("^[0-9]*$")])]}),this.sessionUser={},this.errorMessage=""}signin(){this.isLoading=!0,console.log("signinForm",this.signinForm.value);const i=this.signinForm.controls.empId.value;if(!i||isNaN(parseInt(i,10)))return this.errorMessage="The employee ID is invalid! Please enter a number.",void(this.isLoading=!1);this.securityService.findEmployeeById(i).subscribe({next:n=>{console.log("employee",n),this.sessionUser=n,this.cookieService.set("session_user",i,1),this.cookieService.set("session_name",`${n.firstName} ${n.lastName}`,1);const r=this.route.snapshot.queryParamMap.get("returnUrl")||"/";this.isLoading=!1,this.router.navigate([r])},error:n=>{this.isLoading=!1,this.errorMessage=n.error.message?n.error.message:n.message}})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(a.gz),t.Y36(a.F0),t.Y36(g.N),t.Y36(h),t.Y36(o.qu))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-signin"]],decls:23,vars:4,consts:[[1,"container"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-4","col-md-6","col-sm-6"],[1,"card","shadow","primary"],[1,"text-center","primary"],[1,"p-3",2,"font-weight","600","color","white","margin-top","15px"],[1,"card-body","primary"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["class","alert alert-danger","role","alert",4,"ngIf"],["for","empId",1,"form-label"],["type","text","id","empId","formControlName","empId",1,"form-control"],[1,"d-grid","col-8","mx-auto"],["type","submit",1,"btn","text-white","btn-lg",2,"background-color","#a18a2e","font-weight","500"],[4,"ngIf"],["routerLink","/",1,"text-dark","link-underline-opacity-0-hover","return-btn"],["role","alert",1,"alert","alert-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6,"Employee Sign In"),t.qZA()(),t.TgZ(7,"div",6)(8,"form",7),t.NdJ("ngSubmit",function(){return r.signin(),r.signinForm.reset()}),t.TgZ(9,"div",8),t.YNc(10,f,2,1,"div",9),t.TgZ(11,"label",10)(12,"em"),t._uU(13,"Employee ID:"),t.qZA()(),t._UZ(14,"input",11)(15,"br"),t.qZA(),t.TgZ(16,"div",12)(17,"button",13),t.YNc(18,v,2,0,"span",14),t.YNc(19,y,3,0,"div",14),t.qZA()()()()(),t.TgZ(20,"a",15),t._uU(21,"Return"),t.qZA()()()(),t._uU(22,">")),2&n&&(t.xp6(8),t.Q6J("formGroup",r.signinForm),t.xp6(2),t.Q6J("ngIf",r.errorMessage),t.xp6(8),t.Q6J("ngIf",!r.isLoading),t.xp6(1),t.Q6J("ngIf",r.isLoading))},dependencies:[u.O5,a.rH,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return e})(),title:"Nodebucket: Sign In"},{path:"not-found",component:(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-not-found"]],decls:8,vars:0,consts:[[1,"container-not-found"],[1,"card","bg-transparent","pt-5","pb-5"],[1,"card-title","text-align"],["src","./assets/error-404.png",1,"img-fluid",2,"width","600px"],[1,"card-content","text-align"],["routerLink","/",1,"btn","text-white","btn-lg",2,"background-color","#a18a2e","font-weight","500"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"div",4)(6,"button",5),t._uU(7,"Return home"),t.qZA()()()())},dependencies:[a.rH],styles:[".container-not-found[_ngcontent-%COMP%]{background-color:#2a3671;margin:10px;height:100%}.card[_ngcontent-%COMP%]{border:none;margin:auto}@media (max-width: 500px){.container-not-found[_ngcontent-%COMP%]{padding-bottom:100px}}"]})}return e})(),title:"404 Error"}]}];let Z=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(b),a.Bz]})}return e})(),S=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[u.ez,Z,a.Bz,o.u5,o.UX,d.JF]})}return e})()}}]);